<!DOCTYPE html>
<html>
<head>
    <title>Joke Generator</title>
</head>
<body>
    <h1>Joke Generator</h1>
    
    <div id="jokes-container"></div>
    
    <button onclick="generateJoke()">Get Joke</button>
    
    <script>
        async function fetchJoke() {
            const response = await fetch('https://icanhazdadjoke.com/', {
                headers: {
                    'Accept': 'application/json'
                }
            });
            const data = await response.json();
            return data.joke;
        }
        
        function displayJoke(jokeText) {
            const jokesContainer = document.getElementById("jokes-container");
            const jokeElement = document.createElement("p");
            jokeElement.textContent = jokeText;

            const saveButton = document.createElement("button");
            saveButton.textContent = "Save Joke";
            saveButton.addEventListener("click", function () {
                saveJoke(jokeText);
            });

            jokeElement.appendChild(saveButton);
            jokesContainer.appendChild(jokeElement);
        }

        async function generateJoke() {
            try {
                const joke = await fetchJoke();
                displayJoke(joke);
            } catch (error) {
                console.error('Error fetching joke:', error);
            }
        }

        function saveJoke(jokeText) {
            const blob = new Blob([jokeText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'joke.txt';
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
